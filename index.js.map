{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50757194-f2b273e514caa2f992e1a47fc';\n\nexport const getImagesByQuery = async (query, page = 1, perPage = 15) => {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage,\n            },\n        });\n        \n        return response.data;\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        throw error;\n    }\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport const createGallery = (images) => {\n    const gallery = document.querySelector('.gallery');\n\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"lightbox\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <div class=\"image-info\">\n                <p><strong>Likes</strong> ${image.likes}</p>\n                <p><strong>Views</strong> ${image.views}</p>\n                <p><strong>Comments</strong> ${image.comments}</p>\n                <p><strong>Downloads</strong> ${image.downloads}</p>\n            </div>\n        </li>\n    `).join('');\n\n    gallery.innerHTML += markup;\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n    } else {\n        lightbox.refresh();\n    }\n\n    \n};\n\nexport const clearGallery = () => {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = ''; \n};\n\nexport const showLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'block';\n};\n\nexport const hideLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'none';\n};\n\nexport const showLoadMoreButton = () => {\n    const loadMoreButton = document.querySelector('.load-more');\n    loadMoreButton.classList.add('visible');\n};\n\nexport const hideLoadMoreButton = () => {\n    const loadMoreButton = document.querySelector('.load-more');\n    loadMoreButton.classList.remove('visible');\n};","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('.load-more');\nconst searchData = document.querySelector('.search-data');\nlet currentPage = 1;\nlet searchQuery = '';\nlet searchDataText = '';\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    searchQuery = form.elements['search-text'].value.trim();\n\n    if (!searchQuery) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    clearGallery();\n    showLoader();\n    currentPage = 1;\n    \n    try {\n        const data = await getImagesByQuery(searchQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            hideLoadMoreButton();\n            return;\n        }\n\n        createGallery(data.hits);\n\n        searchDataText = `<p><strong>Search phrase</strong>: ${searchQuery}, <strong>Total imades:</strong> ${data.total}, <strong>Total hits:</strong> ${data.totalHits}, <strong>Images pp:</strong> ${data.hits.length}, <strong>Total pages:</strong> ${Math.ceil(data.totalHits / 15)}</p>`;\n        searchData.innerHTML = searchDataText;\n\n        if (currentPage * 15 >= data.totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\",\n                position: 'topRight',\n            });\n        } else {\n            showLoadMoreButton();\n        }\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n\n    form.elements['search-text'].value = '';\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(searchQuery, currentPage);\n\n        if (data.hits.length === 0) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\",\n                position: 'topRight',\n            });\n            \n            return;\n        }\n\n        createGallery(data.hits);\n        \n        setTimeout(() => {\n            const galleryItem = document.querySelector('.gallery-item');\n            if (galleryItem) {\n                const { height } = galleryItem.getBoundingClientRect();\n                window.scrollBy({\n                    top: height * 2,\n                    behavior: 'smooth',\n                });\n            }\n        }, 300);\n        \n        if (currentPage * 15 >= data.totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\",\n                position: 'topRight',\n            });\n        } else {\n            showLoadMoreButton();\n        }\n        \n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n});"],"names":["API_KEY","getImagesByQuery","query","page","perPage","axios","error","lightbox","createGallery","images","gallery","markup","image","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMoreButton","searchData","currentPage","searchQuery","searchDataText","event","iziToast","data","galleryItem","height"],"mappings":"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"}