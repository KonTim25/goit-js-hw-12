{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '50757194-f2b273e514caa2f992e1a47fc';\n\nexport const getImagesByQuery = async (query, page = 1, perPage = 15) => {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage,\n            },\n        });\n        return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        throw error;\n    }\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport const createGallery = (images) => {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.map(image => `\n        <li class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"lightbox\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <div class=\"image-info\">\n                <p><strong>Likes</strong> ${image.likes}</p>\n                <p><strong>Views</strong> ${image.views}</p>\n                <p><strong>Comments</strong> ${image.comments}</p>\n                <p><strong>Downloads</strong> ${image.downloads}</p>\n            </div>\n        </li>\n    `).join('');\n\n    gallery.innerHTML += markup;\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n    } else {\n        lightbox.refresh();\n    }\n\n    \n};\n\nexport const clearGallery = () => {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = ''; \n};\n\nexport const showLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'block';\n};\n\nexport const hideLoader = () => {\n    const loader = document.querySelector('.loader');\n    loader.style.display = 'none';\n};\n\nexport const showLoadMoreButton = () => {\n    const loadMoreButton = document.querySelector('.load-more');\n    loadMoreButton.classList.add('visible');\n};\n\nexport const hideLoadMoreButton = () => {\n    const loadMoreButton = document.querySelector('.load-more');\n    loadMoreButton.classList.remove('visible');\n};","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet searchQuery = '';\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    searchQuery = form.elements['search-text'].value.trim();\n\n    if (!searchQuery) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term',\n            position: 'topRight',\n        });\n        return;\n    }\n\n    clearGallery();\n    showLoader();\n    currentPage = 1;\n\n    try {\n        const images = await getImagesByQuery(searchQuery, currentPage);\n        if (images.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            hideLoadMoreButton();\n            return;\n        }\n\n        createGallery(images);\n        showLoadMoreButton();\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n\n    form.elements['search-text'].value = '';\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const images = await getImagesByQuery(searchQuery, currentPage);\n        if (images.length === 0) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\",\n                position: 'topRight',\n            });\n            \n            return;\n        }\n\n        createGallery(images);\n        \n        setTimeout(() => {\n            const galleryItem = document.querySelector('.gallery-item');\n            if (galleryItem) {\n                const { height } = galleryItem.getBoundingClientRect();\n                window.scrollBy({\n                    top: height * 2,\n                    behavior: 'smooth',\n                });\n            }\n        }, 300);\n        \n        showLoadMoreButton();\n    } catch (error) {\n        iziToast.error({\n            message: 'An error occurred while fetching images. Please try again later.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n});"],"names":["API_KEY","getImagesByQuery","query","page","perPage","axios","error","lightbox","createGallery","images","gallery","markup","image","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMoreButton","currentPage","searchQuery","event","iziToast","galleryItem","height"],"mappings":"owBAEA,MAAMA,EAAU,qCAEHC,EAAmB,MAAOC,EAAOC,EAAO,EAAGC,EAAU,KAAO,CACrE,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACb,CACb,CAAS,GACe,KAAK,IACxB,OAAQE,EAAO,CACZ,cAAQ,MAAM,uBAAwBA,CAAK,EACrCA,CACT,CACL,ECnBA,IAAIC,EAEG,MAAMC,EAAiBC,GAAW,CACrC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,uBAEhBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,4CAGtBA,EAAM,KAAK;AAAA,4CACXA,EAAM,KAAK;AAAA,+CACRA,EAAM,QAAQ;AAAA,gDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG1D,EAAE,KAAK,EAAE,EAEVF,EAAQ,WAAaC,EAEhBJ,EAMDA,EAAS,QAAO,EALhBA,EAAW,IAAIM,EAAe,aAAc,CACxC,aAAc,MACd,aAAc,GAC1B,CAAS,CAMT,EAEaC,EAAe,IAAM,CAC9B,MAAMJ,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACxB,EAEaK,EAAa,IAAM,CAC5B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OAC3B,EAEaC,EAAa,IAAM,CAC5B,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,MAC3B,EAEaE,EAAqB,IAAM,CACb,SAAS,cAAc,YAAY,EAC3C,UAAU,IAAI,SAAS,CAC1C,EAEaC,EAAqB,IAAM,CACb,SAAS,cAAc,YAAY,EAC3C,UAAU,OAAO,SAAS,CAC7C,ECrDMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAc,EACdC,EAAc,GAElBH,EAAK,iBAAiB,SAAU,MAAOI,GAAU,CAK7C,GAJAA,EAAM,eAAc,EAEpBD,EAAcH,EAAK,SAAS,aAAa,EAAE,MAAM,OAE7C,CAACG,EAAa,CACdE,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6BACT,SAAU,UACtB,CAAS,EACD,MACH,CAEDX,IACAC,IACAO,EAAc,EAEd,GAAI,CACA,MAAMb,EAAS,MAAMR,EAAiBsB,EAAaD,CAAW,EAC9D,GAAIb,EAAO,SAAW,EAAG,CACrBgB,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,EACDN,IACA,MACH,CAEDX,EAAcC,CAAM,EACpBS,GACH,MAAe,CACZO,EAAS,MAAM,CACX,QAAS,mEACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNR,GACH,CAEDG,EAAK,SAAS,aAAa,EAAE,MAAQ,EACzC,CAAC,EAEDC,EAAe,iBAAiB,QAAS,SAAY,CACjDC,GAAe,EACfH,IACAJ,IAEA,GAAI,CACA,MAAMN,EAAS,MAAMR,EAAiBsB,EAAaD,CAAW,EAC9D,GAAIb,EAAO,SAAW,EAAG,CACrBU,IACAM,EAAS,KAAK,CACV,QAAS,4DACT,SAAU,UAC1B,CAAa,EAED,MACH,CAEDjB,EAAcC,CAAM,EAEpB,WAAW,IAAM,CACb,MAAMiB,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACb,KAAM,CAAE,OAAAC,CAAM,EAAKD,EAAY,sBAAqB,EACpD,OAAO,SAAS,CACZ,IAAKC,EAAS,EACd,SAAU,QAC9B,CAAiB,CACJ,CACJ,EAAE,GAAG,EAENT,GACH,MAAe,CACZO,EAAS,MAAM,CACX,QAAS,mEACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNR,GACH,CACL,CAAC"}